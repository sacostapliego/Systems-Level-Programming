(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{197:function(e,n,o){Promise.resolve().then(o.bind(o,7360))},7360:function(e,n,o){"use strict";o.d(n,{default:function(){return d}});var t=o(7437),r=o(2265);let i=e=>{let{programName:n,scriptPath:o,programId:t,setOutput:i}=e,[c,a]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e="emscripten-script-".concat(t),n=document.getElementById(e);if(n&&(n.remove(),n=null),void 0!==window.Module){if(window.Module&&"function"==typeof window.Module.exit)try{window.Module.exit()}catch(e){console.warn("[".concat(t,"] PRE-LOAD: Error calling exit on old Module:"),e)}try{delete window.Module,window.Module=void 0}catch(e){console.warn("[".concat(t,"] PRE-LOAD: Error deleting/undefining window.Module:"),e)}}if(void 0!==window.ExitStatus)try{delete window.ExitStatus,window.ExitStatus=void 0}catch(e){console.warn("[".concat(t,"] PRE-LOAD: Error deleting/undefining window.ExitStatus:"),e)}a(!1),l.current=null,(n=document.createElement("script")).id=e,n.src=o,n.async=!0,n.onload=()=>{"function"==typeof window.Module?(0,window.Module)({print:e=>{i(n=>[...n,e])},printErr:e=>{console.error("[".concat(t," STDERR]:"),e),i(n=>[...n,"ERROR: ".concat(e)])},locateFile:(e,n)=>o.substring(0,o.lastIndexOf("/")+1)+e,onRuntimeInitialized:()=>{}}).then(o=>{if(document.getElementById(e)===n)l.current=o,a(!0);else if(console.warn("[".concat(t,"] Emscripten factory resolved, but script tag mismatch or no longer in DOM. Not setting module.")),o&&"function"==typeof o.exit)try{o.exit()}catch(e){}}).catch(e=>{console.error("[".concat(t,"] Error during Emscripten module instantiation via factory:"),e),i(n=>[...n,"FATAL ERROR: Instantiation failed for ".concat(o,". ").concat(e.message||String(e))]),a(!1)}):(console.error("[".concat(t,"] Emscripten factory function (window.Module) not found after script ").concat(o," loaded.")),i(e=>[...e,"FATAL ERROR: Emscripten module factory not found for ".concat(o,". Ensure it's compiled with -sMODULARIZE=1.")]),a(!1))},n.onerror=e=>{if(console.error("[".concat(t,"] SCRIPT LOAD ERROR: Failed to load script: ").concat(o,". Event:"),e),i(e=>[...e,"FATAL ERROR: Failed to load script ".concat(o,". Check console and network tab.")]),a(!1),n&&n.parentElement&&n.parentElement.removeChild(n),window.Module)try{delete window.Module,window.Module=void 0}catch(e){}},document.body.appendChild(n);let r=n;return()=>{if(r&&r.parentElement&&r.parentElement.removeChild(r),l.current&&"function"==typeof l.current.exit)try{l.current.exit()}catch(e){console.warn("[".concat(t,"] EFFECT CLEANUP: Error calling exit() on module instance:"),e)}if(void 0!==window.Module)try{delete window.Module,window.Module=void 0}catch(e){console.warn("[".concat(t,"] EFFECT CLEANUP: Error deleting/undefining window.Module:"),e)}if(void 0!==window.ExitStatus){console.warn("[".concat(t,"] EFFECT CLEANUP: Cleaning up window.ExitStatus."));try{delete window.ExitStatus,window.ExitStatus=void 0}catch(e){console.warn("[".concat(t,"] EFFECT CLEANUP: Error deleting/undefining window.ExitStatus:"),e)}}l.current=null}},[n,o,t,i]),{isLoaded:c,moduleRef:l,setIsLoaded:a}};var c=e=>{var n;let{programName:o,scriptPath:c,programId:a,initFunctionNameOverride:l,processInputFunctionNameOverride:d}=e,[u,s]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[h,m]=(0,r.useState)(""),f=(0,r.useRef)(null),{isLoaded:w,moduleRef:x,setIsLoaded:E}=i({programName:o,scriptPath:c,programId:a,setOutput:s});(0,r.useEffect)(()=>{w||g(!1)},[w]),(0,r.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[u]);let y=()=>l||"init_".concat(a),b=()=>"minigame"!==a||d?d||"process_".concat(a,"_input"):"process_minigame_guess",v=()=>{let e=b(),n="_"+e;if(!h.trim()){s(e=>[...e,"Please type an input before sending."]);return}if(!w||!x.current||"function"!=typeof x.current.ccall){let e="[".concat(a,"] Module not ready to process input. Loaded: ").concat(w,", Running: ").concat(p,", Module: ").concat(!!x.current);console.warn(e),s(n=>[...n,e]);return}s(e=>[...e,"> ".concat(h)]);try{if("function"==typeof x.current[n]){let n={};"jukebox"===a&&(n.async=!0),x.current.ccall(e,"void",["string"],[h],n)}else{let e="[".concat(a,"] Input handling function '").concat(n,"' not found on Module. Check export settings.");console.warn(e,x.current),s(n=>[...n,e])}}catch(e){console.error("[".concat(a,"] Error sending input:"),e),s(n=>[...n,"Error sending input: ".concat(e.message||String(e))])}m("")};return(0,t.jsxs)("div",{style:{border:"1px solid lightgray",padding:"0.5em",margin:"0 0 1em 0",backgroundColor:"#28282B",color:"white",borderRadius:"4px",minHeight:"350px"},children:[!p&&w&&(0,t.jsx)("button",{onClick:()=>{let e=y(),n="_"+e;if(w&&x.current&&"function"==typeof x.current.ccall)try{if("function"==typeof x.current[n])x.current.ccall(e,"void",[],[]),g(!0);else if("function"==typeof x.current._main)x.current.callMain([]),g(!0);else{let e="[".concat(a,"] No suitable init function ('").concat(n,"' or '_main') found on Module.");console.error(e,x.current),s(n=>[...n,e])}}catch(e){console.error("[".concat(a,"] Error initializing/running:"),e),s(n=>[...n,"Error: ".concat(e.message||String(e))])}else{let e="[".concat(a,"] Module not ready or ccall not available for initialization. Loaded: ").concat(w,", Module: ").concat(!!x.current);console.warn(e),s(n=>[...n,e])}},disabled:!w,className:"cprogram-runner-button",children:"Start"}),w&&p&&(0,t.jsxs)("div",{style:{margin:"1em 0"},children:[(0,t.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Enter input for the program",style:{marginRight:"0.5em",padding:"0.5em",color:"black",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px"},onKeyPress:e=>{"Enter"===e.key&&v()}}),(0,t.jsx)("button",{onClick:v,className:"cprogram-runner-button",disabled:!(null===(n=x.current)||void 0===n?void 0:n["_"+b()]),children:"Send Input"})]}),(0,t.jsx)("h5",{children:"Output:"}),(0,t.jsx)("pre",{ref:f,style:{backgroundColor:"black",border:"1px solid #333",padding:"0.5em",minHeight:"300px",maxHeight:"600px",overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:u.join("\n")}),(0,t.jsxs)("p",{style:{fontSize:"0.8em",color:"gray"},children:[(0,t.jsx)("strong",{children:"Note:"}),' Click "Start" first. Then enter your input.']})]})},a=o(231),l=o.n(a);function d(e){let{programId:n,initialProgram:o}=e,i="/Systems-Level-Programming",[a,d]=(0,r.useState)(o),[u,s]=(0,r.useState)("run"),[p,g]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{d(o),s("run"),g(null),m(!1)},[o]),(0,r.useEffect)(()=>{"code"===u&&(null==a?void 0:a.originalCodePath)&&!p&&(m(!0),fetch("".concat(i).concat(a.originalCodePath)).then(e=>{if(!e.ok)throw Error("Failed to fetch code: ".concat(e.statusText));return e.text()}).then(e=>{g(e),m(!1)}).catch(e=>{console.error("Error fetching original code:",e),g("Error loading code: ".concat(e.message)),m(!1)}))},[u,a,p,i]),!a)return(0,t.jsxs)("main",{style:{padding:"2rem",color:"white",backgroundColor:"black",minHeight:"100vh"},children:[(0,t.jsx)("h1",{children:"Program Not Found"}),(0,t.jsxs)("p",{children:['The program ID "',n,'" is not recognized.']}),(0,t.jsx)(l(),{href:"/",style:{color:"lightblue"},children:"Go back to Home"})]});let f=e=>({padding:"10px 15px",cursor:"pointer",backgroundColor:u===e?"#28282B":"#101011",color:"white",marginRight:"5px",borderRadius:"4px 4px 0 0",borderColor:u===e?"lightgray":"transparent",borderWidth:"1px",borderStyle:"solid"});return(0,t.jsxs)("main",{style:{padding:"2rem",backgroundColor:"#1e1e1e",color:"white",minHeight:"100vh"},children:[(0,t.jsx)(l(),{href:"/",style:{color:"lightblue",marginBottom:"1rem",display:"inline-block"},children:"← Back to Home"}),(0,t.jsx)("h1",{children:a.name}),(0,t.jsx)("p",{style:{marginBottom:"1.5rem"},children:a.description}),(0,t.jsxs)("div",{style:{marginBottom:"0"},children:[(0,t.jsx)("button",{style:f("run"),onClick:()=>s("run"),children:"Run Program"}),a.originalCodePath&&(0,t.jsx)("button",{style:f("code"),onClick:()=>s("code"),children:"View Original Code"})]}),"run"===u&&(0,t.jsx)(c,{programName:a.name,scriptPath:"".concat(i).concat(a.scriptPath),programId:a.id,initFunctionNameOverride:a.initFunctionNameOverride,processInputFunctionNameOverride:a.processInputFunctionNameOverride},a.id),"code"===u&&a.originalCodePath&&(0,t.jsxs)("div",{style:{border:"1px solid lightgray",padding:"0.5em",margin:"0 0 1em 0",backgroundColor:"#28282B",color:"white",borderRadius:"0 0 4px 4px",minHeight:"350px"},children:[(0,t.jsxs)("h5",{children:["Original C Code: ",a.originalCodePath?"(".concat(a.originalCodePath.split("/").pop(),")"):""]}),h&&(0,t.jsx)("p",{children:"Loading code..."}),p&&!h&&(0,t.jsx)("pre",{style:{backgroundColor:"black",border:"1px solid #333",padding:"0.5em",minHeight:"300px",maxHeight:"600px",overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all",color:"#d4d4d4"},children:p}),!p&&!h&&(0,t.jsx)("p",{children:"No code path provided or code could not be loaded."})]})]})}}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=197)}),_N_E=e.O()}]);