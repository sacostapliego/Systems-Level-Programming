(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{197:function(e,n,t){Promise.resolve().then(t.bind(t,7360))},7360:function(e,n,t){"use strict";t.d(n,{default:function(){return d}});var o=t(7437),r=t(2265);let i=e=>{let{programName:n,scriptPath:t,programId:o,setOutput:i}=e,[c,a]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e="emscripten-script-".concat(o),n=document.getElementById(e);if(n&&(n.remove(),n=null),void 0!==window.Module){if(window.Module&&"function"==typeof window.Module.exit)try{window.Module.exit()}catch(e){console.warn("[".concat(o,"] PRE-LOAD: Error calling exit on old Module:"),e)}try{delete window.Module,window.Module=void 0}catch(e){console.warn("[".concat(o,"] PRE-LOAD: Error deleting/undefining window.Module:"),e)}}if(void 0!==window.ExitStatus)try{delete window.ExitStatus,window.ExitStatus=void 0}catch(e){console.warn("[".concat(o,"] PRE-LOAD: Error deleting/undefining window.ExitStatus:"),e)}a(!1),l.current=null,(n=document.createElement("script")).id=e,n.src=t,n.async=!0,n.onload=()=>{"function"==typeof window.Module?(0,window.Module)({print:e=>{i(n=>[...n,e])},printErr:e=>{console.error("[".concat(o," STDERR]:"),e),i(n=>[...n,"ERROR: ".concat(e)])},locateFile:(e,n)=>t.substring(0,t.lastIndexOf("/")+1)+e,onRuntimeInitialized:()=>{}}).then(t=>{if(document.getElementById(e)===n)l.current=t,a(!0);else if(console.warn("[".concat(o,"] Emscripten factory resolved, but script tag mismatch or no longer in DOM. Not setting module.")),t&&"function"==typeof t.exit)try{t.exit()}catch(e){}}).catch(e=>{console.error("[".concat(o,"] Error during Emscripten module instantiation via factory:"),e),i(n=>[...n,"FATAL ERROR: Instantiation failed for ".concat(t,". ").concat(e.message||String(e))]),a(!1)}):(console.error("[".concat(o,"] Emscripten factory function (window.Module) not found after script ").concat(t," loaded.")),i(e=>[...e,"FATAL ERROR: Emscripten module factory not found for ".concat(t,". Ensure it's compiled with -sMODULARIZE=1.")]),a(!1))},n.onerror=e=>{if(console.error("[".concat(o,"] SCRIPT LOAD ERROR: Failed to load script: ").concat(t,". Event:"),e),i(e=>[...e,"FATAL ERROR: Failed to load script ".concat(t,". Check console and network tab.")]),a(!1),n&&n.parentElement&&n.parentElement.removeChild(n),window.Module)try{delete window.Module,window.Module=void 0}catch(e){}},document.body.appendChild(n);let r=n;return()=>{if(r&&r.parentElement&&r.parentElement.removeChild(r),l.current&&"function"==typeof l.current.exit)try{l.current.exit()}catch(e){console.warn("[".concat(o,"] EFFECT CLEANUP: Error calling exit() on module instance:"),e)}if(void 0!==window.Module)try{delete window.Module,window.Module=void 0}catch(e){console.warn("[".concat(o,"] EFFECT CLEANUP: Error deleting/undefining window.Module:"),e)}if(void 0!==window.ExitStatus){console.warn("[".concat(o,"] EFFECT CLEANUP: Cleaning up window.ExitStatus."));try{delete window.ExitStatus,window.ExitStatus=void 0}catch(e){console.warn("[".concat(o,"] EFFECT CLEANUP: Error deleting/undefining window.ExitStatus:"),e)}}l.current=null}},[n,t,o,i]),{isLoaded:c,moduleRef:l,setIsLoaded:a}};var c=e=>{var n;let{programName:t,scriptPath:c,programId:a,initFunctionNameOverride:l,processInputFunctionNameOverride:d}=e,[u,s]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[m,h]=(0,r.useState)(""),f=(0,r.useRef)(null),{isLoaded:w,moduleRef:E,setIsLoaded:x}=i({programName:t,scriptPath:c,programId:a,setOutput:s});(0,r.useEffect)(()=>{w||g(!1)},[w]),(0,r.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[u]);let y=()=>l||"init_".concat(a),b=()=>"minigame"!==a||d?d||"process_".concat(a,"_input"):"process_minigame_guess",v=()=>{let e=b(),n="_"+e;if(!m.trim()){s(e=>[...e,"Please type an input before sending."]);return}if(!w||!E.current||"function"!=typeof E.current.ccall){let e="[".concat(a,"] Module not ready to process input. Loaded: ").concat(w,", Running: ").concat(p,", Module: ").concat(!!E.current);console.warn(e),s(n=>[...n,e]);return}s(e=>[...e,"> ".concat(m)]);try{if("function"==typeof E.current[n]){let n={};"jukebox"===a&&(n.async=!0),E.current.ccall(e,"void",["string"],[m],n)}else{let e="[".concat(a,"] Input handling function '").concat(n,"' not found on Module. Check export settings.");console.warn(e,E.current),s(n=>[...n,e])}}catch(e){console.error("[".concat(a,"] Error sending input:"),e),s(n=>[...n,"Error sending input: ".concat(e.message||String(e))])}h("")};return(0,o.jsxs)("div",{style:{padding:"0.5em",margin:"0 0 1em 0",backgroundColor:"#28282B",color:"white",borderRadius:"4px",minHeight:"350px",borderTopLeftRadius:"0"},children:[!p&&w&&(0,o.jsx)("button",{onClick:()=>{let e=y(),n="_"+e;if(w&&E.current&&"function"==typeof E.current.ccall)try{if("function"==typeof E.current[n])E.current.ccall(e,"void",[],[]),g(!0);else if("function"==typeof E.current._main)E.current.callMain([]),g(!0);else{let e="[".concat(a,"] No suitable init function ('").concat(n,"' or '_main') found on Module.");console.error(e,E.current),s(n=>[...n,e])}}catch(e){console.error("[".concat(a,"] Error initializing/running:"),e),s(n=>[...n,"Error: ".concat(e.message||String(e))])}else{let e="[".concat(a,"] Module not ready or ccall not available for initialization. Loaded: ").concat(w,", Module: ").concat(!!E.current);console.warn(e),s(n=>[...n,e])}},disabled:!w,className:"cprogram-runner-button",children:"Start"}),w&&p&&(0,o.jsxs)("div",{style:{margin:"1em 0"},children:[(0,o.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Enter input for the program",style:{marginRight:"0.5em",padding:"0.5em",color:"black",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px"},onKeyPress:e=>{"Enter"===e.key&&v()}}),(0,o.jsx)("button",{onClick:v,className:"cprogram-runner-button",disabled:!(null===(n=E.current)||void 0===n?void 0:n["_"+b()]),children:"Send Input"})]}),(0,o.jsx)("h5",{children:"Output:"}),(0,o.jsx)("pre",{ref:f,style:{backgroundColor:"black",border:"1px solid #333",padding:"0.5em",minHeight:"300px",maxHeight:"600px",overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:u.join("\n")}),(0,o.jsxs)("p",{style:{fontSize:"0.8em",color:"gray"},children:[(0,o.jsx)("strong",{children:"Note:"}),' Click "Start" first. Then enter your input.']})]})},a=t(231),l=t.n(a);function d(e){let{programId:n,initialProgram:t}=e,i="/Systems-Level-Programming",[a,d]=(0,r.useState)(t),[u,s]=(0,r.useState)("run"),[p,g]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{d(t),s("run"),g(null),h(!1)},[t]),(0,r.useEffect)(()=>{"code"===u&&(null==a?void 0:a.originalCodePath)&&!p&&(h(!0),fetch("".concat(i).concat(a.originalCodePath)).then(e=>{if(!e.ok)throw Error("Failed to fetch code: ".concat(e.statusText));return e.text()}).then(e=>{g(e),h(!1)}).catch(e=>{console.error("Error fetching original code:",e),g("Error loading code: ".concat(e.message)),h(!1)}))},[u,a,p,i]),!a)return(0,o.jsxs)("main",{style:{padding:"2rem",color:"white",backgroundColor:"black",minHeight:"100vh"},children:[(0,o.jsx)("h1",{children:"Program Not Found"}),(0,o.jsxs)("p",{children:['The program ID "',n,'" is not recognized.']}),(0,o.jsx)(l(),{href:"/",style:{color:"lightblue"},children:"Go back to Home"})]});let f=e=>({padding:"10px 15px",cursor:"pointer",backgroundColor:u===e?"#28282B":"#101011",color:"white",marginRight:"5px",borderRadius:"4px 4px 0 0"});return(0,o.jsxs)("main",{style:{padding:"2rem",backgroundColor:"#1e1e1e",color:"white",minHeight:"100vh"},children:[(0,o.jsx)(l(),{href:"/",style:{color:"lightblue",marginBottom:"1rem",display:"inline-block"},children:"← Back to Home"}),(0,o.jsx)("h1",{children:a.name}),(0,o.jsx)("p",{style:{marginBottom:"1.5rem"},children:a.description}),(0,o.jsxs)("div",{style:{marginBottom:"0"},children:[(0,o.jsx)("button",{style:f("run"),onClick:()=>s("run"),children:"Run Program"}),a.originalCodePath&&(0,o.jsx)("button",{style:f("code"),onClick:()=>s("code"),children:"View Original Code"})]}),"run"===u&&(0,o.jsx)(c,{programName:a.name,scriptPath:"".concat(i).concat(a.scriptPath),programId:a.id,initFunctionNameOverride:a.initFunctionNameOverride,processInputFunctionNameOverride:a.processInputFunctionNameOverride},a.id),"code"===u&&a.originalCodePath&&(0,o.jsxs)("div",{style:{padding:"0.5em",margin:"0 0 1em 0",backgroundColor:"#28282B",color:"white",borderRadius:"0 0 4px 4px",minHeight:"350px"},children:[m&&(0,o.jsx)("p",{children:"Loading code..."}),p&&!m&&(0,o.jsx)("pre",{style:{backgroundColor:"black",border:"1px solid #333",padding:"0.5em",minHeight:"300px",maxHeight:"600px",overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all",color:"#d4d4d4"},children:p}),!p&&!m&&(0,o.jsx)("p",{children:"No code path provided or code could not be loaded."})]})]})}}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=197)}),_N_E=e.O()}]);